<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>Antigravity API æ–‡æ¡£</title>
  <script>
    try {
      const saved = localStorage.getItem('ag-panel-theme');
      if (saved) document.documentElement.setAttribute('data-theme', saved);
    } catch (e) {}
  </script>
  <link rel="stylesheet" href="/admin/panel.css" />
  <script src="/admin/theme.js"></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <div>
        <h1>Antigravity API æ–‡æ¡£</h1>
        <p>ä»¥ä¸‹æ¥å£å‡éœ€åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ <code>Authorization: Bearer $API_KEY</code>ã€‚</p>
      </div>
      <div class="header-actions">
        <button id="apiThemeToggle" class="refresh-btn" type="button">ğŸŒ™ åˆ‡æ¢ä¸ºæš—è‰²</button>
        <a class="refresh-btn" href="/admin/" rel="noopener">â† è¿”å›æ§åˆ¶å°</a>
      </div>
    </header>

    <section class="card">
      <div class="card-header">
        <div>
          <div class="eyebrow">è®¤è¯</div>
          <h2>API Key</h2>
          <p>æ‰€æœ‰æ¥å£å‡ä½¿ç”¨ç¯å¢ƒå˜é‡ <code>API_KEY</code> æ ¡éªŒï¼Œæœªé€šè¿‡æ ¡éªŒå°†è¿”å› <code>401</code>ã€‚</p>
        </div>
      </div>
      <div class="card-body">
        <ul>
          <li>è¯·æ±‚å¤´ï¼š<code>Authorization: Bearer &lt;API_KEY&gt;</code></li>
          <li>Content-Typeï¼šå¯¹äº POST è¯·æ±‚è¯·ä½¿ç”¨ <code>application/json</code></li>
        </ul>
      </div>
    </section>

    <section class="card">
      <div class="card-header">
        <div>
          <div class="eyebrow">å‡­è¯æ¸…å•</div>
          <h2>GET /v1/lits</h2>
          <p>è¿”å›æ‰€æœ‰å·²å¯ç”¨çš„å‡­è¯åç§°ï¼ˆprojectIdï¼‰åŠå½“å‰å°æ—¶ç”¨é‡ä¸å‰©ä½™é¢åº¦ã€‚</p>
        </div>
      </div>
      <div class="card-body">
        <p><strong>è¯·æ±‚ç¤ºä¾‹</strong></p>
        <pre><code>GET /v1/lits
Authorization: Bearer &lt;API_KEY&gt;</code></pre>
        <p><strong>å“åº”ç¤ºä¾‹</strong></p>
        <pre><code>{
  "credentials": [
    {"name": "project-1", "used_per_hour": 3, "remaining_per_hour": 17},
    {"name": "project-2", "used_per_hour": 0, "remaining_per_hour": 20}
  ],
  "windowMinutes": 60,
  "limitPerCredential": 20,
  "updatedAt": "2025-01-01T00:00:00.000Z"
}</code></pre>
      </div>
    </section>

    <section class="card">
      <div class="card-header">
        <div>
          <div class="eyebrow">OpenAI å…¼å®¹</div>
          <h2>POST /v1/chat/completions</h2>
          <p>ä¸ OpenAI <code>/v1/chat/completions</code> å…¼å®¹ï¼ŒæŒ‰ç³»ç»Ÿé…ç½®çš„æ¯å°æ—¶é™é¢è‡ªåŠ¨è½®æ¢å‡­è¯ã€‚</p>
        </div>
      </div>
      <div class="card-body">
        <p><strong>è¯·æ±‚ç¤ºä¾‹</strong></p>
        <pre><code>POST /v1/chat/completions
Authorization: Bearer &lt;API_KEY&gt;
Content-Type: application/json

{
  "model": "gemini-pro",
  "stream": true,
  "messages": [
    {"role": "user", "content": "ä½ å¥½"}
  ]
}</code></pre>
        <p><strong>å“åº”ç¤ºä¾‹ï¼ˆæµå¼ç‰‡æ®µï¼‰</strong></p>
        <pre><code>data: {"id":"chatcmpl-...","object":"chat.completion.chunk",...}
...
data: [DONE]</code></pre>
      </div>
    </section>

    <section class="card">
      <div class="card-header">
        <div>
          <div class="eyebrow">æŒ‰å‡­è¯ç›´è¿</div>
          <h2>POST /{credential}/v1/chat/completions</h2>
          <p>æŒ‡å®šå‡­è¯ï¼ˆprojectIdï¼‰æ‰§è¡Œ OpenAI è§„èŒƒèŠå¤©æ¥å£ï¼Œä¸å—æ¯å°æ—¶ç”¨é‡é™åˆ¶ã€‚</p>
        </div>
      </div>
      <div class="card-body">
        <p><strong>è¯·æ±‚ç¤ºä¾‹</strong></p>
        <pre><code>POST /project-1/v1/chat/completions
Authorization: Bearer &lt;API_KEY&gt;
Content-Type: application/json

{
  "model": "gemini-pro",
  "messages": [
    {"role": "user", "content": "ä½¿ç”¨æŒ‡å®šå‡­è¯å›å¤æˆ‘"}
  ]
}</code></pre>
        <p><strong>å“åº”ç¤ºä¾‹ï¼ˆéæµå¼ï¼‰</strong></p>
        <pre><code>{
  "id": "chatcmpl-...",
  "object": "chat.completion",
  "created": 1735689600,
  "model": "gemini-pro",
  "choices": [
    {
      "index": 0,
      "message": {"role": "assistant", "content": "å¥½çš„ï¼Œè¿™æ˜¯æŒ‰æŒ‡å®šå‡­è¯ç”Ÿæˆçš„å›å¤ã€‚"},
      "finish_reason": "stop"
    }
  ]
}</code></pre>
        <p>å½“å‡­è¯ä¸å¯ç”¨æˆ–è¢«åœç”¨æ—¶è¿”å› <code>404</code>ï¼Œä¸ä¼šè®¡å…¥è½®è¯¢ç”¨é‡ã€‚</p>
      </div>
    </section>
  </div>
  <script>
    window.AgTheme?.bindThemeToggle?.(document.getElementById('apiThemeToggle'));
  </script>
</body>
</html>
